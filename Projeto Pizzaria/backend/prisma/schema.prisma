generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         String    @id @default(uuid())
  name       String
  funcao     String
  email      String
  password   String
  created_at DateTime? @default(now())
  updated_at DateTime? @default(now())

  @@map("funcionarios")
}

model Cliente {
  id         String    @id @default(uuid())
  name       String
  email      String
  password   String
  cpf        String
  data_nasc  DateTime?
  created_at DateTime? @default(now())
  updated_at DateTime? @default(now())

  avaliacao Avaliacao[]
  favoritos Favorito[]
  comandas  Comanda[]
  order     Order[]

  @@map("clientes")
}

model Favorito {
  id         String    @id @default(uuid())
  created_at DateTime? @default(now())
  updated_at DateTime? @default(now())

  product    Product @relation(fields: [product_id], references: [id])
  product_id String

  cliente    Cliente @relation(fields: [cliente_id], references: [id])
  cliente_id String

  @@map("favorites")
}

model Category {
  id         String    @id @default(uuid())
  name       String
  created_at DateTime? @default(now())
  updated_at DateTime? @default(now())

  products Product[]

  @@map("categories")
}

model Product {
  id          String    @id @default(uuid())
  name        String
  price       Float
  points      Float
  description String
  promocao    Boolean
  created_at  DateTime? @default(now())
  updated_at  DateTime? @default(now())

  category    Category @relation(fields: [category_id], references: [id])
  category_id String

  items     Item[]
  favoritos Favorito[]

  @@map("products")
}

model Order {
  id         String    @id @default(uuid())
  status     String
  price      Float
  points     Float
  created_at DateTime? @default(now())
  updated_at DateTime? @default(now())

  cliente    Cliente @relation(fields: [cliente_id], references: [id])
  cliente_id String

  items   Item[]
  comanda Comanda[]

  @@map("pedidos")
}

model Comanda {
  id         String    @id @default(uuid())
  table      String
  status     String
  price      Float
  points     Float
  created_at DateTime? @default(now())
  updated_at DateTime? @default(now())

  cliente    Cliente @relation(fields: [cliente_id], references: [id])
  cliente_id String

  order    Order  @relation(fields: [order_id], references: [id])
  order_id String

  avaliacao Avaliacao[]

  @@map("comandas")
}

model Avaliacao {
  id         String    @id @default(uuid())
  nota       Int
  descricao  String
  created_at DateTime? @default(now())

  cliente    Cliente @relation(fields: [cliente_id], references: [id])
  comanda    Comanda @relation(fields: [comanda_id], references: [id])
  cliente_id String
  comanda_id String

  @@map("avaliacoes")
}

model Item {
  id         String    @id @default(uuid())
  qtd        Int
  created_at DateTime? @default(now())
  updated_at DateTime? @default(now())

  order   Order   @relation(fields: [order_id], references: [id])
  product Product @relation(fields: [product_id], references: [id])

  order_id   String
  product_id String

  @@map("items")
}
